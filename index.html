<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>USV: control local</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
</head>
<body>
  <h1>USV: control local</h1>

  <section>
    <button id="connectBleButton">Conectar estación</button>
    <button id="disconnectBleButton">Desconectar estación</button>
    <p>Estado estación: <strong><span id="bleState" style="color:#d13a30;">Desconectado</span></strong></p>
    <p id="estadoNRF" class="gray-label">Esperando estado NRF...</p>
  </section>

  <section>
    <h2>Distancia del USV</h2>
    <p><span id="valueContainer">NaN</span></p>
    <p>Última lectura: <span id="timestamp"></span></p>
    <p>Nivel de batería: <span id="batteryLevel">--</span>%</p>
    <p id="lowBatteryWarning" style="color: red; font-weight: bold;"></p>
    <div class="battery-visual">
    <div class="battery-fill-overlay" id="batteryFillOverlay"></div>
    <div class="boat-svg">
    <!-- Tu barco SVG -->
    <svg fill="#000000" height="200px" width="200px" version="1.1"
         xmlns="http://www.w3.org/2000/svg" viewBox="0 0 475.04 475.04">
      <path d="M474.057,253.807c-1.334-2.341-3.821-3.788-6.517-3.788H344.527l-31.122-61.4c-0.238-0.471-0.526-0.916-0.858-1.327 
      c-4.803-5.935-12.059-14.904-24.214-14.904H169.711l-14.466-65.499c-0.759-3.436-3.805-5.882-7.323-5.882h-64
      c-2.219,0-4.324,0.982-5.749,2.684c-1.425,1.701-2.023,3.945-1.635,6.13l13.353,75.051l-60.441,65.147H7.5 
      c-4.143,0-7.5,3.358-7.5,7.5v85.15c0,0.516,0.053,1.03,0.158,1.534c3.612,17.285,19.05,29.83,36.708,29.83H276.16 
      c39.849,0,79.213-10.425,113.838-30.148c34.624-19.723,63.669-48.265,83.993-82.541 
      C475.366,259.026,475.391,256.149,474.057,253.807z M276.16,359.033H36.866c-10.354,0-19.437-7.189-21.866-17.196v-22.311h360.354 
      c4.143,0,7.5-3.358,7.5-7.5s-3.357-7.5-7.5-7.5H15v-39.507h293.02c4.143,0,7.5-3.358,7.5-7.5c0-4.142-3.357-7.5-7.5-7.5H49.91 
      l43.272-46.642l4.788,26.91c0.646,3.634,3.809,6.188,7.375,6.188c0.436,0,0.879-0.039,1.322-0.117 
      c4.078-0.726,6.796-4.62,6.07-8.698L92.873,116.007h49.023l14.467,65.499c0.848,3.84,4.499,6.33,8.329,5.809 
      c0.326,0.043,0.656,0.073,0.995,0.073h122.646c4.083,0,7.319,2.939,12.057,8.73l5.29,10.437h-80.959c-4.143,0-7.5,3.358-7.5,7.5 
      s3.357,7.5,7.5,7.5h88.563l19.948,39.355c0.009,0.017,0.021,0.032,0.029,0.049c0.149,0.287,0.313,0.564,0.496,0.827 
      c0.038,0.056,0.081,0.107,0.121,0.161c0.146,0.198,0.301,0.389,0.465,0.572c0.063,0.071,0.125,0.142,0.19,0.209 
      c0.203,0.21,0.416,0.411,0.642,0.596c0.052,0.043,0.108,0.08,0.161,0.121c0.193,0.15,0.394,0.289,0.601,0.42 
      c0.073,0.046,0.145,0.09,0.219,0.133c0.249,0.145,0.504,0.279,0.77,0.395c0.012,0.005,0.023,0.012,0.035,0.017 
      c0.286,0.123,0.582,0.224,0.884,0.311c0.064,0.019,0.129,0.033,0.194,0.05c0.235,0.061,0.473,0.11,0.716,0.148 
      c0.084,0.013,0.167,0.028,0.25,0.038c0.281,0.034,0.566,0.056,0.855,0.058c0.022,0,0.044,0.005,0.066,0.005 
      c0.009,0,0.017-0.001,0.025-0.001H453.88C414.118,323.328,347.209,359.033,276.16,359.033z"/>
      </svg>
    </div>
  </div>

  </section>

  <section>
    <h2>Mapa</h2>
    <div class="map-container">
      <div id="map"></div>
    </div>
  </section>


  <section>
    <h2>Control de rumbo</h2>
    <button id="onButton">ON</button>
    <button id="offButton">OFF</button>
    <p>Último valor enviado: <span id="valueSent"></span></p>
  </section>

  <script src="script.js"></script>
</body>
</html>
